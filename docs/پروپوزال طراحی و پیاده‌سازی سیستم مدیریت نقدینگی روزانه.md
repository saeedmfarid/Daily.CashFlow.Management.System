<div dir="rtl">

## پروپوزال طراحی و پیاده‌سازی سیستم مدیریت نقدینگی روزانه


**تاریخ: ۲۵ بهمن ۱۴۰۴**  
**به: کارفرمای محترم**  
**از: شرکت فناوری اطلاعات ترنج**  
**موضوع: پیشنهاد فنی و مالی برای توسعه سیستم مدیریت روزانه نقدینگی (Daily Cash Flow Management System)**  

### مقدمه
   با استناد به نیازمندی‌های دقیق ارائه‌شده در تعریف پروژه که از طریق مهندس رضاپور گرامی دریافت شده است، پیشنهاد خود را برای طراحی و پیاده‌سازی سیستم مدیریت نقدینگی روزانه ارائه می‌نماید. از ایشان بابت ارسال این RFP سپاسگزاریم. این سیستم یک پلتفرم تحت وب چندکاربره است که بر اساس استانداردهای مدرن توسعه نرم‌افزار، با تمرکز بر امنیت، کارایی و قابلیت گسترش، پیاده‌سازی خواهد شد. تعریف پروژه شامل اتصال خواندنی به ERP، ثبت دستی اطلاعات، لایه اصلاحات، موتور محاسبه نقدینگی، پشتیبانی از تقویم‌های شمسی و میلادی، مدیریت تعطیلات، پیش‌بینی نقدینگی، مدیریت کاربران، ثبت لاگ تغییرات (Audit Log) و ماژول‌های رابط کاربری (مانند داشبورد و گزارش‌گیری) است. همچنین، تصاویر ارائه‌شده از داشبورد (شامل نمودارهای بار و خطی برای ورودی/خروجی/مانده، و جداول تراکنش‌ها با فیلدهای تاریخ، مبلغ، ارز و وضعیت) به دقت بررسی شده و در طراحی UI/UX منعکس خواهد شد تا رابط کاربری بصری و کارآمد باشد.

این پروپوزال بر اساس نرخ پایه خدمات فنی-تخصصی انفورماتیک سال ۱۴۰۴ (مصوب سازمان نظام صنفی رایانه‌ای کشور) تهیه شده است، با اعمال ضرایب مناسب برای رتبه شرکت (رتبه ۱ در حوزه نرم‌افزار) به منظور ارائه قیمتی رقابتی و امکان مذاکره بیشتر. زمان‌بندی پروژه با تمرکز بر کیفیت و تست‌های جامع، به گونه‌ای طراحی شده که امکان گسترش فازها برای پوشش تغییرات احتمالی وجود داشته باشد.

### دامنه پروژه
دامنه پروژه بر اساس تعریف ارائه‌شده شامل موارد زیر است:
- **اتصال به ERP**: دریافت اطلاعات مالی به صورت فقط خواندنی از طریق View دیتابیس یا Import فایل CSV/Excel، بدون ویرایش مستقیم داده‌ها.
- **ثبت اطلاعات دستی**: فرم‌های ورودی برای پیش‌بینی‌ها، پرداخت‌ها و تزریق نقدینگی، با فیلدهای تاریخ اثر (میلادی)، نوع تراکنش، مبلغ، ارز، دسته‌بندی و توضیحات.
- **لایه اصلاحات ERP**: ثبت اصلاحات در جدول جداگانه بدون تغییر داده اصلی، با امکان اعمال آلارم برای چک/پرداخت.
- **موتور محاسبه نقدینگی**: محاسبه روزانه ورودی/خروجی/مانده بر اساس تاریخ اثر، با ذخیره نتایج در جدول daily_cash_position.
- **پشتیبانی تقویم**: ذخیره تاریخ‌ها به میلادی، نمایش و ورودی به شمسی/میلادی، پشتیبانی از هفته‌های شمسی (شنبه-جمعه) و میلادی (قابل تنظیم).
- **مدیریت تعطیلات**: جدول holidays با انتقال خودکار به روز کاری بعدی، نمایش در داشبورد.
- **پیش‌بینی نقدینگی**: گزارش‌های ۷ روزه، ۳۰ روزه و ۱۸۰ روزه با لحاظ سررسیدها و تعطیلات.
- **مدیریت کاربران و دسترسی‌ها**: نقش‌های مشاهده‌گر، ثبت‌کننده، ناظر و مدیر سیستم، با ورود الزامی.
- **ثبت لاگ تغییرات**: Audit Log برای ایجاد/ویرایش/حذف ثبت‌ها و اصلاحات.
- **ماژول‌های رابط کاربری**: مشاهده تراکنش‌ها، فرم ثبت، داشبورد روزانه/هفتگی/پیش‌بینی، پنل مدیریت، خروجی Excel/PDF، با طراحی مشابه تصاویر ارائه‌شده (نمودارهای رنگی، جداول فیلترشده).

خارج از دامنه: تغییرات اساسی در ERP اصلی، توسعه اپ موبایل، یا ادغام با سیستم‌های خارجی بدون توافق اضافی.

### معماری پیشنهادی (Clean Architecture)
برای اطمینان از قابلیت نگهداری، تست‌پذیری و گسترش، از معماری Clean Architecture استفاده می‌شود که لایه‌ها را مستقل نگه می‌دارد و وابستگی‌ها را به سمت داخل هدایت می‌کند. این معماری بر اساس اصول SOLID و DDD (Domain-Driven Design) بنا شده و امکان تغییرات آینده بدون تأثیر بر لایه‌های دیگر را فراهم می‌کند. جزئیات لایه‌ها به شرح زیر است:

- **لایه Domain (Core)**: هسته کسب‌وکار سیستم، شامل مدل‌های داده (Entities مانند Transaction, Adjustment, Holiday, ManualEntry) و قوانین تجاری (Business Rules). برای مثال، قوانین محاسبه نقدینگی بر اساس Cash Effective Date، validation برای تاریخ‌ها و مبالغ، و Aggregate Roots برای مدیریت پیش‌بینی‌ها. این لایه مستقل از فناوری است و تست‌پذیری بالایی دارد.
- **لایه Application**: سرویس‌های کسب‌وکار و Use Cases، مانند CashFlowCalculationService برای محاسبه روزانه/هفتگی، PredictionService برای پیش‌بینی ۷/۳۰/۱۸۰ روزه با لحاظ تعطیلات، AuditService برای ثبت لاگ تغییرات، و AdjustmentService برای اعمال اصلاحات بدون تغییر داده اصلی. از الگوهایی مانند CQRS برای جداسازی خواندن/نوشتن و Mediator برای مدیریت درخواست‌ها استفاده می‌شود.
- **لایه Infrastructure**: پیاده‌سازی جزئیات فنی، مانند اتصال به ERP از طریق Entity Framework Core (برای View/CSV Import)، دیتابیس PostgreSQL برای ذخیره‌سازی (با schemaهای جداگانه برای erp_transactions, manual_entries, adjustments, audit_log, holidays)، کتابخانه JalaliDate برای تبدیل تقویم شمسی/میلادی، و ادغام با ابزارهای خارجی مانند Hangfire برای کارهای پس‌زمینه (آلارم چک/پرداخت). این لایه شامل Repositoryها و Adapterها برای جداسازی وابستگی‌ها است.
- **لایه Presentation**: رابط کاربری با Flutter برای وب (و قابلیت گسترش به موبایل)، شامل کامپوننت‌های بصری مانند charts_flutter یا syncfusion_flutter_charts برای داشبوردهای مشابه تصاویر (بارچارت‌های رنگی برای ورودی/خروجی، خطی برای مانده، جداول با فیلتر/صفحه‌بندی). پشتیبانی RTL برای فارسی، و API Client برای ارتباط با backend via RESTful APIs.

تکنولوژی‌های جدید:
- **Backend**: .NET Core 8 برای عملکرد بالا، امنیت встроенный (مانند Rate Limiting)، Entity Framework Core برای ORM، JWT برای احراز هویت کاربران با نقش‌ها، Hangfire برای کارهای زمان‌بندی‌شده (مانند محاسبات روزانه پیش‌بینی).
- **Frontend**: Flutter 3.x برای UI واکنش‌گرا و کراس-پلتفرم، با پشتیبانی RTL، کتابخانه‌های syncfusion_flutter_charts برای داشبوردهای پیشرفته، و state management با Provider یا Riverpod.
- **DevOps**: Docker/Kubernetes برای کانتینریزاسیون و مقیاس‌پذیری، Azure DevOps یا GitHub Actions برای CI/CD (build/test/deploy خودکار)، SonarQube برای تحلیل کیفیت کد، و Prometheus/Grafana برای مانیتورینگ.
- **امنیت**: رعایت استاندارد OWASP، Audit Log جامع با EF Core Interceptors، رمزنگاری داده‌های حساس (AES)، و Role-Based Access Control (RBAC).
- **ابری**: استقرار روی Azure/AWS با Microservices (در صورت نیاز به گسترش، مانند سرویس جداگانه برای پیش‌بینی)، و استفاده از Serverless برای کارهای پس‌زمینه.

این معماری با دیاگرام‌های UML (مانند Class Diagram برای Domain، Sequence Diagram برای Use Cases) در فاز طراحی مستندسازی خواهد شد.

### فازهای پروژه (بر اساس Scrum و DevOps)
پروژه در اسپرینت‌های ۳ هفته‌ای مدیریت می‌شود، با Daily Stand-ups, Sprint Reviews و Retrospectives. DevOps برای اتوماسیون تست/استقرار اعمال می‌شود. زمان کل: حداقل ۵ ماه (MVP)، حداکثر ۸ ماه (نسخه کامل با بهینه‌سازی).

| فاز | توضیحات دقیق | فعالیت‌های کلیدی | مدت زمان تخمینی (حداقل/حداکثر) | خروجی |
|------|-------------|----------|-----------------------------------|--------|
| **فاز ۱: Initiation و Planning** | راه‌اندازی پروژه، تعریف scope دقیق و برنامه‌ریزی کلی. | جلسات اولیه، شناسایی ریسک‌ها، تنظیم ابزارها (مانند Jira برای backlog). | ۲-۳ هفته | charter پروژه، تیم اولیه. |
| **فاز ۲: Requirements Gathering** | جمع‌آوری و تحلیل نیازمندی‌ها بر اساس تعریف و تصاویر. | مصاحبه‌ها، user stories، prioritization backlog. | ۳-۵ هفته | سند SRS، user stories. |
| **فاز ۳: Design** | طراحی سیستم، دیتابیس و UI. | Wireframes داشبورد، schema جداول، architecture diagrams. | ۴-۶ هفته | طراحی مستند، prototypes UI. |
| **فاز ۴: Backend Development (Sprints 1-4)** | پیاده‌سازی هسته backend با .NET Core. | APIها برای محاسبات، اتصال ERP، لایه اصلاحات، Audit، تقویم/تعطیلات. | ۷-۱۲ هفته | Backend کد، unit tests، API docs. |
| **فاز ۵: Frontend Development (Sprints 5-7)** | ساخت رابط کاربری با Flutter. | داشبوردهای بصری، فرم‌ها، گزارش‌ها، ادغام با backend. | ۷-۱۲ هفته | Frontend کد، UI tests. |
| **فاز ۶: Integration و Testing (Sprints 8-10)** | ادغام لایه‌ها، تست جامع. | CI/CD setup، integration tests، load/performance، UAT با سناریوها. | ۵-۹ هفته | سیستم یکپارچه، گزارش تست. |
| **فاز ۷: Deployment و Support** | استقرار، آموزش و پشتیبانی. | Dockerization، deployment ابری، آموزش کاربران، پشتیبانی ۲ ماهه. | ۳-۵ هفته | سیستم عملیاتی، مستندات، گزارش نهایی. |

مجموع نفرساعت: حداقل ۱,۲۰۰ ساعت، حداکثر ۲,۰۰۰ ساعت.

### زمان‌بندی و تحویل
- **زمان کل**: حداقل ۵ ماه از شروع قرارداد (برای MVP با ویژگی‌های اصلی)، حداکثر ۸ ماه (برای نسخه کامل با بهینه‌سازی و تست‌های گسترده). این زمان‌بندی انعطاف‌پذیر است و امکان افزودن اسپرینت برای تغییرات وجود دارد.
- **تحویل‌ها**: MVP در پایان فاز ۵، نسخه نهایی در پایان فاز ۷.

### برآورد مالی (بر اساس نرخ پایه ۱۴۰۴)
برآورد بر اساس نرخ پایه S = ۳,۵۰۰,۰۰۰ ریال/ساعت، با f1 = ۱.۸۰ (رتبه ۱ = ۱.۵۰ × حوزه نرم‌افزار = ۱.۲۰)، و ضرایب نیروی انسانی (f2). کمک هزینه ساعتی ۲۲۵,۰۰۰ ریال اعمال شده. حاشیه ۱۰% برای ابزارها/سرور/پشتیبانی.

| نقش | f2 | نرخ ساعتی (تومان) | نفرساعت (حداقل/حداکثر) | هزینه (میلیون تومان، حداقل/حداکثر) |
|------|-----|---------------------|------------------------------------|---------------------------------------|
| تحلیلگر/طراح ارشد | ۲.۹۴۹ | ۱,۸۶۰,۰۰۰ | ۲۰۰/۴۰۰ | ۳۷۲/۷۴۴ |
| برنامه‌نویس ارشد (Backend/Frontend) | ۲.۳۹۶ | ۱,۵۱۰,۰۰۰ | ۵۰۰/۹۰۰ | ۷۵۵/۱,۳۵۹ |
| مدیر پروژه | ۵.۷۵۳ | ۳,۶۲۳,۰۰۰ | ۱۲۰/۱۸۰ | ۴۳۵/۶۵۲ |
| تستر | ۲.۱۰۰ | ۱,۱۳۴,۰۰۰ | ۱۵۰/۳۰۰ | ۱۷۰/۳۴۰ |
| **جمع** | - | - | ۹۷۰/۱,۷۸۰ | ۱,۷۳۲/۳,۰۹۵ |

**هزینه کل (با حاشیه ۱۰%)**: حداقل ۱,۹۰۵ میلیون تومان، حداکثر ۳,۴۰۵ میلیون تومان. این قیمت امکان تعدیل بر اساس تغییرات دامنه را دارد. پرداخت: ۳۰% پیش‌پرداخت، ۴۰% پس از MVP، ۳۰% پس از تحویل نهایی.

### نتیجه‌گیری
این پروپوزال با تمرکز بر کیفیت و انطباق کامل با نیازمندی‌ها (از جمله تصاویر داشبورد) تهیه شده است. ما آماده مذاکره برای تنظیم جزئیات هستیم. لطفاً برای هماهنگی تماس بگیرید.

**با احترام،**   
شرکت فناوری اطلاعات ترنج
تماس: 09352579393

</div>
